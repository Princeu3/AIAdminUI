# Railway Deployment Configuration
# Docs: https://docs.railway.app/reference/config-as-code

[build]
builder = "dockerfile"
dockerfilePath = "backend/Dockerfile"

[deploy]
# Health check endpoint
healthcheckPath = "/api/health"
healthcheckTimeout = 30

# Restart policy
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# Start command (override if needed)
# startCommand = "uv run uvicorn app.main:app --host 0.0.0.0 --port $PORT"

# Number of instances
numReplicas = 1

# Railway will automatically set PORT env var
# The app should listen on $PORT

# Persistent volumes for Railway
# Note: Configure these in Railway dashboard under "Volumes"
# - claude-credentials -> /root/.claude (store CLAUDE_CREDENTIALS_JSON here)
# - repos-data -> /app/repos
# - db-data -> /app/data
